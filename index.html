<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>RBS88 â€” Mahjong Ways 2</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden;touch-action:manipulation}
body{
  font-family:'Inter',sans-serif;
  background:#1a5c2a;
  display:flex;align-items:center;justify-content:center;
  user-select:none;-webkit-user-select:none;
}

/* â•â•â•â•â•â•â•â•â•â• MAIN CONTAINER â•â•â•â•â•â•â•â•â•â• */
.game-container{
  width:100%;max-width:420px;height:100vh;max-height:820px;
  display:flex;flex-direction:column;
  position:relative;overflow:hidden;
  background:linear-gradient(180deg,#2d8a3e 0%,#1a5c2a 30%,#14472a 100%);
  box-shadow:0 0 60px rgba(0,0,0,.4);
}

/* â•â•â•â•â•â•â•â•â•â• TOP BAR â•â•â•â•â•â•â•â•â•â• */
.top-bar{
  display:flex;justify-content:space-between;align-items:center;
  padding:8px 14px;
  background:linear-gradient(180deg,rgba(0,0,0,.3),transparent);
  position:relative;z-index:10;
}
.top-bar .game-name{
  font-size:.72rem;font-weight:600;color:rgba(255,255,255,.8);
  text-shadow:0 1px 3px rgba(0,0,0,.3);
}
.top-bar .game-time{
  font-family:'JetBrains Mono',monospace;
  font-size:.68rem;color:rgba(255,255,255,.6);
}

/* â•â•â•â•â•â•â•â•â•â• WAYS DISPLAY â•â•â•â•â•â•â•â•â•â• */
.ways-bar{
  text-align:center;padding:2px 0;position:relative;z-index:10;
}
.ways-text{
  font-size:.7rem;font-weight:700;
  color:#ffe066;text-shadow:0 0 10px rgba(255,224,102,.4);
  letter-spacing:2px;
}

/* â•â•â•â•â•â•â•â•â•â• MULTIPLIER BAR â•â•â•â•â•â•â•â•â•â• */
.multi-bar{
  display:flex;justify-content:center;gap:8px;
  padding:6px 16px 8px;position:relative;z-index:10;
}
.multi-step{
  width:52px;height:30px;
  display:flex;align-items:center;justify-content:center;
  border-radius:6px;font-family:'JetBrains Mono',monospace;
  font-size:.82rem;font-weight:800;
  background:rgba(0,0,0,.25);
  border:2px solid rgba(255,255,255,.08);
  color:rgba(255,255,255,.3);
  transition:all .3s;position:relative;
}
.multi-step.active{
  background:linear-gradient(180deg,#ff4444,#cc2200);
  border-color:#ff6666;
  color:#fff;
  box-shadow:0 0 16px rgba(255,68,68,.4),0 2px 8px rgba(0,0,0,.3);
  transform:scale(1.1);
}
.multi-step.gold{
  background:linear-gradient(180deg,#ffd700,#cc9900);
  border-color:#ffe44d;
  color:#000;
  box-shadow:0 0 20px rgba(255,215,0,.5);
  transform:scale(1.15);
}

/* â•â•â•â•â•â•â•â•â•â• REEL AREA â•â•â•â•â•â•â•â•â•â• */
.reel-area{
  flex:1;position:relative;
  margin:0 10px;overflow:hidden;
  display:flex;align-items:center;justify-content:center;
}

/* Ornamental frame */
.reel-frame{
  position:relative;width:100%;height:100%;
  display:flex;flex-direction:column;
}

/* Dragon ornaments */
.ornament-top{
  height:24px;
  background:linear-gradient(90deg,
    rgba(200,160,60,.2),
    rgba(200,160,60,.5),
    rgba(200,160,60,.2)
  );
  border-radius:12px 12px 0 0;
  border:1px solid rgba(200,160,60,.3);
  border-bottom:none;
  display:flex;align-items:center;justify-content:center;
}
.ornament-top::before,.ornament-top::after{
  content:'ğŸ‰';font-size:.9rem;position:absolute;
  filter:drop-shadow(0 0 4px rgba(255,200,0,.4));
}
.ornament-top::before{left:12px}
.ornament-top::after{right:12px;transform:scaleX(-1)}

.ornament-bottom{
  height:16px;
  background:linear-gradient(90deg,
    rgba(200,160,60,.2),
    rgba(200,160,60,.5),
    rgba(200,160,60,.2)
  );
  border-radius:0 0 12px 12px;
  border:1px solid rgba(200,160,60,.3);
  border-top:none;
}

/* Reel grid container */
.reel-grid-wrap{
  flex:1;position:relative;overflow:hidden;
  background:radial-gradient(ellipse at center,
    rgba(0,80,20,.4),
    rgba(0,40,10,.7)
  );
  border-left:2px solid rgba(200,160,60,.3);
  border-right:2px solid rgba(200,160,60,.3);
}

/* 5 columns container */
.reels-row{
  display:flex;gap:3px;height:100%;
  padding:3px;
}

/* Each reel column */
.reel-col{
  flex:1;position:relative;overflow:hidden;
  border-radius:4px;
}

/* Reel strip (the scrolling part) */
.reel-strip{
  position:absolute;width:100%;left:0;
  display:flex;flex-direction:column;
  will-change:transform;
}

/* â•â•â•â•â•â•â•â•â•â• MAHJONG TILE â•â•â•â•â•â•â•â•â•â• */
.tile{
  display:flex;align-items:center;justify-content:center;
  position:relative;flex-shrink:0;
  margin:2px 0;
}
.tile-inner{
  width:calc(100% - 4px);
  aspect-ratio:.82;
  border-radius:6px;
  display:flex;align-items:center;justify-content:center;
  position:relative;
  /* 3D tile effect */
  background:linear-gradient(180deg,
    #f8f4e8 0%,
    #ede6d0 60%,
    #d4cbb0 100%
  );
  border:1px solid rgba(180,170,140,.6);
  box-shadow:
    0 3px 0 #b8a878,
    0 4px 0 #a09060,
    0 5px 8px rgba(0,0,0,.25),
    inset 0 1px 0 rgba(255,255,255,.8);
  transition:all .15s;
  overflow:hidden;
}
.tile-inner::before{
  content:'';position:absolute;top:0;left:0;right:0;height:40%;
  background:linear-gradient(180deg,rgba(255,255,255,.3),transparent);
  border-radius:5px 5px 0 0;pointer-events:none;
}
.tile-content{
  font-size:1.6rem;z-index:1;
  filter:drop-shadow(0 1px 1px rgba(0,0,0,.15));
  line-height:1;
}

/* Special tile states */
.tile-inner.wild-tile{
  background:linear-gradient(180deg,
    #ffe680 0%,
    #ffcc00 40%,
    #daa520 100%
  );
  border-color:#c8960a;
  box-shadow:
    0 3px 0 #b8860b,
    0 4px 0 #8b6914,
    0 5px 12px rgba(255,200,0,.3),
    0 0 20px rgba(255,200,0,.2),
    inset 0 1px 0 rgba(255,255,255,.6);
}
.tile-inner.wild-tile .tile-content{
  font-weight:900;font-size:.9rem;
  color:#8b4513;text-shadow:0 1px 0 rgba(255,255,255,.5);
  font-family:'Inter',sans-serif;letter-spacing:1px;
}

.tile-inner.scatter-tile{
  background:linear-gradient(180deg,
    #ffd700 0%,
    #ff8c00 50%,
    #cc6600 100%
  );
  border-color:#cc6600;
  box-shadow:
    0 3px 0 #b85c00,
    0 4px 0 #994d00,
    0 5px 12px rgba(255,140,0,.3),
    0 0 20px rgba(255,140,0,.2),
    inset 0 1px 0 rgba(255,255,255,.5);
  animation:scatterPulse 1.5s infinite alternate;
}
@keyframes scatterPulse{
  from{box-shadow:0 3px 0 #b85c00,0 4px 0 #994d00,0 5px 12px rgba(255,140,0,.3),0 0 20px rgba(255,140,0,.2),inset 0 1px 0 rgba(255,255,255,.5)}
  to{box-shadow:0 3px 0 #b85c00,0 4px 0 #994d00,0 5px 12px rgba(255,140,0,.5),0 0 30px rgba(255,140,0,.4),inset 0 1px 0 rgba(255,255,255,.5)}
}

/* Win glow */
.tile-inner.win-glow{
  box-shadow:
    0 3px 0 #b8a878,
    0 4px 0 #a09060,
    0 0 12px rgba(255,215,0,.5),
    0 0 24px rgba(255,215,0,.3),
    inset 0 1px 0 rgba(255,255,255,.8);
  border-color:#daa520;
}

/* Tile symbols â€” different colors based on type */
.tile-red .tile-content{color:#cc2200}
.tile-green .tile-content{color:#2a7a2a}
.tile-blue .tile-content{color:#1a5aaa}
.tile-gold .tile-content{color:#996600}
.tile-purple .tile-content{color:#6a2aaa}
.tile-black .tile-content{color:#333}

/* â•â•â•â•â•â•â•â•â•â• WIN INFO BANNER â•â•â•â•â•â•â•â•â•â• */
.win-banner{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%) scale(0);
  z-index:100;text-align:center;
  pointer-events:none;
}
.win-banner-inner{
  background:linear-gradient(135deg,#ffd700,#ff8c00);
  border:3px solid #fff;
  border-radius:16px;padding:12px 32px;
  box-shadow:0 0 40px rgba(255,215,0,.5),0 8px 24px rgba(0,0,0,.4);
}
.win-banner-text{
  font-family:'JetBrains Mono',monospace;
  font-size:1.3rem;font-weight:900;color:#fff;
  text-shadow:0 2px 4px rgba(0,0,0,.3);
}
.win-banner-sub{
  font-size:.75rem;font-weight:700;color:rgba(255,255,255,.8);
  margin-top:2px;
}

/* Free spin banner */
.fs-banner{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%) scale(0);
  z-index:100;pointer-events:none;
  background:linear-gradient(135deg,#9b6dff,#ff6eb4);
  border:3px solid #fff;border-radius:16px;
  padding:16px 36px;
  box-shadow:0 0 60px rgba(155,109,255,.5);
}
.fs-banner-text{
  font-family:'JetBrains Mono',monospace;
  font-size:1.2rem;font-weight:900;color:#fff;
  text-shadow:0 2px 4px rgba(0,0,0,.3);
  white-space:nowrap;
}

/* â•â•â•â•â•â•â•â•â•â• CASCADE LOG â•â•â•â•â•â•â•â•â•â• */
.cascade-log{
  position:absolute;top:8px;left:8px;right:8px;
  z-index:50;display:flex;flex-direction:column;gap:3px;
  max-height:60px;overflow:hidden;pointer-events:none;
}
.cas-item{
  background:rgba(0,0,0,.6);backdrop-filter:blur(8px);
  border-radius:6px;padding:3px 10px;
  display:flex;justify-content:space-between;
  font-size:.65rem;color:rgba(255,255,255,.7);
}
.cas-item .cas-win{color:#00ff88;font-weight:700;font-family:'JetBrains Mono',monospace}

/* â•â•â•â•â•â•â•â•â•â• BOTTOM PANEL â•â•â•â•â•â•â•â•â•â• */
.bottom-panel{
  background:linear-gradient(180deg,
    #c87020 0%,
    #a05818 50%,
    #884810 100%
  );
  border-top:2px solid rgba(255,200,100,.3);
  padding:0;position:relative;z-index:10;
}

/* Info scroller */
.info-scroll{
  background:linear-gradient(90deg,#6b3410,#8b4513,#6b3410);
  padding:5px;text-align:center;
  overflow:hidden;
}
.info-scroll-text{
  font-size:.62rem;font-weight:700;
  color:#ffd700;text-transform:uppercase;
  letter-spacing:2px;
  text-shadow:0 0 8px rgba(255,215,0,.4);
  animation:infoScroll 15s linear infinite;
  white-space:nowrap;display:inline-block;
}
@keyframes infoScroll{
  0%{transform:translateX(100%)}
  100%{transform:translateX(-100%)}
}

/* Stats row */
.stats-row{
  display:flex;padding:6px 10px;gap:4px;
}
.stat-box{
  flex:1;text-align:center;
  background:rgba(0,0,0,.2);border-radius:6px;
  padding:4px 2px;
}
.stat-box .s-label{
  font-size:.48rem;color:rgba(255,255,255,.5);
  text-transform:uppercase;letter-spacing:1px;
  font-weight:600;
}
.stat-box .s-value{
  font-family:'JetBrains Mono',monospace;
  font-size:.72rem;font-weight:800;color:#fff;
}
.stat-box .s-value.gold{color:#ffd700}

/* Control row */
.ctrl-row{
  display:flex;align-items:center;justify-content:center;
  padding:8px 16px 12px;gap:8px;
}
.ctrl-btn{
  width:40px;height:40px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:.65rem;font-weight:700;
  color:rgba(255,255,255,.7);
  background:rgba(0,0,0,.25);
  border:1.5px solid rgba(255,255,255,.12);
  transition:all .2s;flex-shrink:0;
}
.ctrl-btn:hover,.ctrl-btn.active{
  background:rgba(255,255,255,.1);
  border-color:rgba(255,255,255,.25);
  color:#fff;
}
.ctrl-btn .cb-icon{font-size:1rem;line-height:1}
.ctrl-btn .cb-text{font-size:.45rem;margin-top:1px;display:block}

/* Spin button */
.spin-btn{
  width:64px;height:64px;border-radius:50%;
  background:linear-gradient(180deg,#20b2aa,#008b8b);
  border:3px solid rgba(255,255,255,.2);
  display:flex;align-items:center;justify-content:center;
  box-shadow:
    0 4px 0 #006666,
    0 6px 16px rgba(0,0,0,.4),
    0 0 24px rgba(32,178,170,.3);
  transition:all .15s;flex-shrink:0;
  position:relative;
}
.spin-btn:hover{
  transform:translateY(-2px);
  box-shadow:
    0 6px 0 #006666,
    0 8px 20px rgba(0,0,0,.4),
    0 0 32px rgba(32,178,170,.4);
}
.spin-btn:active{
  transform:translateY(2px);
  box-shadow:
    0 2px 0 #006666,
    0 3px 8px rgba(0,0,0,.4);
}
.spin-btn:disabled{opacity:.5;pointer-events:none}
.spin-btn.spinning{animation:spinBtnPulse .6s infinite alternate}
@keyframes spinBtnPulse{
  from{box-shadow:0 4px 0 #006666,0 6px 16px rgba(0,0,0,.4),0 0 24px rgba(32,178,170,.3)}
  to{box-shadow:0 4px 0 #006666,0 6px 16px rgba(0,0,0,.4),0 0 40px rgba(32,178,170,.6)}
}
.spin-icon{
  font-size:1.6rem;
  filter:drop-shadow(0 1px 2px rgba(0,0,0,.3));
}

/* Bet adjust buttons */
.bet-adj{
  width:32px;height:32px;border-radius:50%;
  background:rgba(0,0,0,.25);
  border:1.5px solid rgba(255,255,255,.12);
  color:rgba(255,255,255,.7);
  font-size:.9rem;font-weight:800;
  display:flex;align-items:center;justify-content:center;
  transition:all .15s;flex-shrink:0;
}
.bet-adj:hover{background:rgba(255,255,255,.1);color:#fff}

/* â•â•â•â•â•â•â•â•â•â• FREE SPIN MODE OVERLAY â•â•â•â•â•â•â•â•â•â• */
.fs-mode-overlay{
  position:absolute;inset:0;
  border:3px solid rgba(155,109,255,.3);
  border-radius:8px;z-index:5;
  pointer-events:none;display:none;
}
.fs-mode-overlay.active{
  display:block;
  animation:fsGlow 2s infinite alternate;
}
@keyframes fsGlow{
  from{border-color:rgba(155,109,255,.15);box-shadow:inset 0 0 30px rgba(155,109,255,.03)}
  to{border-color:rgba(155,109,255,.4);box-shadow:inset 0 0 40px rgba(155,109,255,.06)}
}
.fs-counter{
  position:absolute;top:40px;right:12px;z-index:50;
  background:linear-gradient(135deg,#9b6dff,#7c4dff);
  border:2px solid #fff;border-radius:10px;
  padding:4px 12px;display:none;
  box-shadow:0 0 16px rgba(155,109,255,.4);
}
.fs-counter.show{display:block}
.fs-counter-text{
  font-family:'JetBrains Mono',monospace;
  font-size:.68rem;font-weight:800;color:#fff;
}

/* â•â•â•â•â•â•â•â•â•â• ADMIN INDICATOR (for testing) â•â•â•â•â•â•â•â•â•â• */
.admin-ind{
  position:absolute;top:4px;left:50%;transform:translateX(-50%);
  z-index:100;padding:2px 10px;border-radius:6px;
  font-size:.55rem;font-weight:700;display:none;
  backdrop-filter:blur(8px);
}
.admin-ind.show{display:block}
.admin-ind.ai-win{background:rgba(0,214,143,.2);color:#00d68f;border:1px solid rgba(0,214,143,.3)}
.admin-ind.ai-lose{background:rgba(255,59,92,.15);color:#ff3b5c;border:1px solid rgba(255,59,92,.2)}
.admin-ind.ai-custom{background:rgba(155,109,255,.15);color:#9b6dff;border:1px solid rgba(155,109,255,.2)}

/* â•â•â•â•â•â•â•â•â•â• AUTH OVERLAY â•â•â•â•â•â•â•â•â•â• */
.auth-overlay{
  position:absolute;inset:0;z-index:200;
  background:rgba(0,0,0,.7);backdrop-filter:blur(8px);
  display:none;align-items:center;justify-content:center;
  padding:20px;
}
.auth-overlay.show{display:flex}
.auth-card{
  background:linear-gradient(180deg,#2a1508,#1a0c04);
  border:2px solid rgba(200,160,60,.3);
  border-radius:16px;width:100%;max-width:340px;
  padding:24px;box-shadow:0 20px 60px rgba(0,0,0,.5);
}
.auth-card h2{
  text-align:center;font-size:1.2rem;font-weight:800;
  color:#ffd700;margin-bottom:4px;
  text-shadow:0 0 12px rgba(255,215,0,.3);
}
.auth-card .auth-sub{
  text-align:center;font-size:.75rem;color:rgba(255,255,255,.5);
  margin-bottom:16px;
}
.auth-tabs{
  display:flex;background:rgba(0,0,0,.3);
  border-radius:8px;padding:3px;margin-bottom:16px;
}
.auth-tab{
  flex:1;padding:8px;text-align:center;border-radius:6px;
  font-weight:700;font-size:.8rem;color:rgba(255,255,255,.4);
  cursor:pointer;transition:all .2s;
}
.auth-tab.act{
  background:linear-gradient(135deg,#ffd700,#daa520);
  color:#000;
}
.a-fg{margin-bottom:10px}
.a-fg label{display:block;font-size:.7rem;color:rgba(255,255,255,.5);margin-bottom:3px;font-weight:600}
.a-fi{
  width:100%;padding:9px 12px;
  background:rgba(0,0,0,.3);
  border:1px solid rgba(255,255,255,.08);
  border-radius:8px;color:#fff;font-size:.82rem;
}
.a-fi:focus{border-color:rgba(255,215,0,.25)}
.a-row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.a-btn{
  width:100%;padding:11px;border-radius:8px;
  background:linear-gradient(135deg,#ffd700,#daa520);
  color:#000;font-weight:800;font-size:.88rem;
  margin-top:8px;transition:all .2s;
}
.a-btn:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(255,215,0,.3)}
.a-ft{text-align:center;margin-top:10px;font-size:.72rem;color:rgba(255,255,255,.4)}
.a-ft a{color:#ffd700;cursor:pointer;font-weight:600}
.a-close{
  position:absolute;top:10px;right:10px;
  width:28px;height:28px;border-radius:50%;
  background:rgba(255,255,255,.05);color:rgba(255,255,255,.4);
  display:flex;align-items:center;justify-content:center;
  font-size:.9rem;cursor:pointer;
}

/* â•â•â•â•â•â•â•â•â•â• RESULT POPUP â•â•â•â•â•â•â•â•â•â• */
.result-bar{
  position:absolute;bottom:0;left:0;right:0;
  z-index:60;text-align:center;padding:6px;
  pointer-events:none;
}
.result-text{
  display:inline-block;padding:5px 18px;
  border-radius:8px;font-weight:800;font-size:.8rem;
  font-family:'JetBrains Mono',monospace;
  backdrop-filter:blur(8px);
}
.result-text.r-win{
  background:rgba(0,214,143,.2);
  border:1px solid rgba(0,214,143,.3);
  color:#00ff88;
}
.result-text.r-big{
  background:rgba(255,215,0,.15);
  border:1px solid rgba(255,215,0,.3);
  color:#ffd700;
  box-shadow:0 0 16px rgba(255,215,0,.2);
}
.result-text.r-mega{
  background:rgba(155,109,255,.15);
  border:1px solid rgba(155,109,255,.3);
  color:#bf8fff;
  box-shadow:0 0 20px rgba(155,109,255,.3);
}
.result-text.r-lose{
  background:rgba(255,255,255,.05);color:rgba(255,255,255,.3);
}

/* â•â•â•â•â•â•â•â•â•â• RESPONSIVE â•â•â•â•â•â•â•â•â•â• */
@media(max-width:380px){
  .tile-content{font-size:1.3rem}
  .spin-btn{width:56px;height:56px}
  .spin-icon{font-size:1.3rem}
  .ctrl-btn{width:34px;height:34px}
}
@media(min-height:750px){
  .tile-content{font-size:1.8rem}
}
</style>
</head>
<body>

<div class="game-container" id="gameContainer">
  <!-- Auth Overlay -->
  <div class="auth-overlay" id="authOverlay">
    <div class="auth-card" style="position:relative">
      <button class="a-close" onclick="closeAuth()">âœ•</button>
      <h2>ğŸ° RBS88</h2>
      <div class="auth-sub">Premium Slot Experience</div>
      <div class="auth-tabs">
        <div class="auth-tab act" onclick="aTab('login')">Login</div>
        <div class="auth-tab" onclick="aTab('reg')">Register</div>
      </div>
      <div id="authForm"></div>
    </div>
  </div>

  <!-- Admin indicator -->
  <div class="admin-ind" id="adminInd"></div>

  <!-- Top Bar -->
  <div class="top-bar">
    <div class="game-name" id="gameName">Mahjong Ways 2 â€” Trial Mode</div>
    <div class="game-time" id="gameTime">00:00:00</div>
  </div>

  <!-- Ways -->
  <div class="ways-bar"><span class="ways-text" id="waysText">2000 WAYS</span></div>

  <!-- Multiplier Bar -->
  <div class="multi-bar" id="multiBar">
    <div class="multi-step active" id="m1">x1</div>
    <div class="multi-step" id="m2">x2</div>
    <div class="multi-step" id="m3">x3</div>
    <div class="multi-step" id="m5">x5</div>
  </div>

  <!-- Reel Area -->
  <div class="reel-area">
    <div class="reel-frame">
      <div class="ornament-top"></div>
      <div class="reel-grid-wrap" id="reelGridWrap">
        <!-- FS overlay -->
        <div class="fs-mode-overlay" id="fsOverlay"></div>
        <div class="fs-counter" id="fsCtr"><div class="fs-counter-text" id="fsCtrText"></div></div>

        <!-- Cascade log -->
        <div class="cascade-log" id="casLog"></div>

        <!-- Win banner -->
        <div class="win-banner" id="winBanner">
          <div class="win-banner-inner">
            <div class="win-banner-text" id="winBannerText"></div>
            <div class="win-banner-sub" id="winBannerSub"></div>
          </div>
        </div>

        <!-- FS banner -->
        <div class="fs-banner" id="fsBanner">
          <div class="fs-banner-text" id="fsBannerText"></div>
        </div>

        <!-- Reels -->
        <div class="reels-row" id="reelsRow">
          <!-- 5 columns generated by JS -->
        </div>

        <!-- Result -->
        <div class="result-bar" id="resultBar">
          <span class="result-text" id="resultText"></span>
        </div>
      </div>
      <div class="ornament-bottom"></div>
    </div>
  </div>

  <!-- Bottom Panel -->
  <div class="bottom-panel">
    <div class="info-scroll">
      <span class="info-scroll-text" id="infoScroll">
        ğŸ‰ ED GOLD PLATED SYMBOLS IN FREE SPINS â€” MULTIPLY YOUR WINS UP TO x5! ğŸ‰ RBS88 PREMIUM SLOT EXPERIENCE ğŸ°
      </span>
    </div>
    <div class="stats-row">
      <div class="stat-box">
        <div class="s-label">Balance</div>
        <div class="s-value gold" id="dispBal">30,000.00</div>
      </div>
      <div class="stat-box">
        <div class="s-label">Bet</div>
        <div class="s-value" id="dispBet">3.00</div>
      </div>
      <div class="stat-box">
        <div class="s-label">Win</div>
        <div class="s-value gold" id="dispWin">0.00</div>
      </div>
    </div>
    <div class="ctrl-row">
      <button class="ctrl-btn" id="btnTurbo" onclick="toggleTurbo()">
        <div><span class="cb-icon">âš¡</span><span class="cb-text">TURBO</span></div>
      </button>
      <button class="bet-adj" onclick="chgBet(-1)">âˆ’</button>
      <button class="spin-btn" id="spinBtn" onclick="doSpin()">
        <span class="spin-icon">ğŸ”„</span>
      </button>
      <button class="bet-adj" onclick="chgBet(1)">+</button>
      <button class="ctrl-btn" id="btnAuto" onclick="toggleAuto()">
        <div><span class="cb-icon">ğŸ”</span><span class="cb-text">AUTO</span></div>
      </button>
    </div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RBS88 MAHJONG WAYS 2 ENGINE
   5 Columns Ã— 4 Rows, Cascade, Wild, Scatter, Free Spins
   Admin-synced via localStorage
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const DB={g(k,d=null){try{return JSON.parse(localStorage.getItem('rbs88_'+k))||d}catch{return d}},s(k,v){localStorage.setItem('rbs88_'+k,JSON.stringify(v))},r(k){localStorage.removeItem('rbs88_'+k)}};

// SEED
if(!DB.g('seeded')){
DB.s('users',[{id:1,username:'admin',email:'admin@rbs88.com',phone:'08123',password:'admin123',bank:'BCA',rekening:'123456',balance:999999999,xp:999999,vip:'Master',role:'admin',totalBet:0,totalWin:0,totalDeposit:0,totalWithdraw:0,totalGames:0,status:'active',winMode:'normal',customRtp:70,joinDate:new Date().toISOString()}]);
DB.s('transactions',[]);
DB.s('promos',[{id:1,code:'WELCOME100',name:'Welcome 100%',type:'percent',value:100,minDepo:50000,maxBonus:1000000,status:'active',usageCount:0}]);
DB.s('settings',{minDeposit:20000,minWithdraw:50000,freebetAmount:30000,globalRtp:70});
DB.s('seeded',true);
}

// MAHJONG TILES â€” using styled characters for 3D tile look
const GAMES=[
{id:'mj2',name:'Mahjong Ways 2',cols:5,rows:4,minCluster:4,
syms:[
  {e:'ä¸­',n:'Zhong',p:5,w:8,cls:'tile-red'},
  {e:'ç™¼',n:'Fa',p:6,w:7,cls:'tile-green'},
  {e:'èƒ¡',n:'Hu',p:8,w:5,cls:'tile-red'},
  {e:'ğŸ®',n:'Lantern',p:4,w:10,cls:''},
  {e:'ğŸª™',n:'Coin',p:3,w:13,cls:''},
  {e:'ä¸€',n:'Yi',p:2,w:16,cls:'tile-blue'},
  {e:'å…«',n:'Ba',p:2.5,w:12,cls:'tile-blue'},
  {e:'è¬',n:'Wan',p:1.5,w:18,cls:'tile-black'},
  {e:'WILD',n:'Wild',p:0,w:3,cls:'',wild:1},
  {e:'ğŸ’°',n:'Scatter',p:0,w:2,cls:'',scatter:1}
]}
];

const BETS=[1,2,3,5,10,20,50,100];
const MULTI_STEPS=[1,2,3,5];
let user=null,curGame=GAMES[0],betIdx=2,spinning=false,turbo=false,autoMode=false,autoCount=0;
let grid=[],freeSpins=0,cascadeLevel=0,totalSpinWin=0,sessionWin=0;
const COLS=()=>curGame.cols,ROWS=()=>curGame.rows,MIN_CL=()=>curGame.minCluster;

// Admin sync
window.addEventListener('storage',()=>{if(user){const u=DB.g('users',[]).find(x=>x.id===user.id);if(u){user=u;updUI();}}});
setInterval(()=>{if(user){const u=DB.g('users',[]).find(x=>x.id===user.id);if(u&&u.winMode!==user.winMode){user=u;updAdminInd();}}},500);

// Time
setInterval(()=>{const d=new Date();document.getElementById('gameTime').textContent=d.toTimeString().slice(0,8);},1000);

// â•â•â• INIT â•â•â•
document.addEventListener('DOMContentLoaded',()=>{
checkSession();
if(!user){showAuth();}else{initGame();}
});

function checkSession(){const sid=DB.g('session');if(sid)user=DB.g('users',[]).find(u=>u.id===sid)||null;}
function saveUser(){if(!user)return;const u=DB.g('users',[]);const i=u.findIndex(x=>x.id===user.id);if(i>=0)u[i]=user;DB.s('users',u);DB.s('session',user.id);}
function fmt(n){return parseFloat(n||0).toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2})}
function addTx(uid,type,amount,desc){const t=DB.g('transactions',[]);t.unshift({id:Date.now()+Math.random(),userId:uid,type,amount,desc,status:'success',date:new Date().toISOString()});if(t.length>500)t.length=500;DB.s('transactions',t);}

// â•â•â• AUTH â•â•â•
function showAuth(){document.getElementById('authOverlay').classList.add('show');aTab('login');}
function closeAuth(){document.getElementById('authOverlay').classList.remove('show');}
function aTab(t){
document.querySelectorAll('.auth-tab').forEach((x,i)=>x.classList.toggle('act',i===(t==='login'?0:1)));
const f=document.getElementById('authForm');
if(t==='login'){
f.innerHTML=`<div class="a-fg"><label>Username</label><input class="a-fi" id="lU"></div><div class="a-fg"><label>Password</label><input class="a-fi" id="lP" type="password"></div><button class="a-btn" onclick="doLogin()">LOGIN</button><div class="a-ft">New? <a onclick="aTab('reg')">Register</a></div>`;
}else{
f.innerHTML=`<div class="a-fg"><label>Username</label><input class="a-fi" id="rU" placeholder="Min 4"></div><div class="a-row"><div class="a-fg"><label>Email</label><input class="a-fi" id="rE"></div><div class="a-fg"><label>Phone</label><input class="a-fi" id="rH"></div></div><div class="a-row"><div class="a-fg"><label>Password</label><input class="a-fi" id="rP" type="password"></div><div class="a-fg"><label>Confirm</label><input class="a-fi" id="rP2" type="password"></div></div><div class="a-row"><div class="a-fg"><label>Bank</label><select class="a-fi" id="rB"><option value="">Select</option><option>BCA</option><option>BNI</option><option>BRI</option><option>Mandiri</option><option>DANA</option><option>OVO</option></select></div><div class="a-fg"><label>Account #</label><input class="a-fi" id="rR"></div></div><button class="a-btn" onclick="doReg()">REGISTER & GET FREEBET</button><div class="a-ft">Have account? <a onclick="aTab('login')">Login</a></div>`;
}}
function doLogin(){const u=document.getElementById('lU').value.trim(),p=document.getElementById('lP').value;if(!u||!p)return;const f=DB.g('users',[]).find(x=>x.username.toLowerCase()===u.toLowerCase()&&x.password===p);if(!f)return alert('Wrong credentials');if(f.status==='banned')return alert('Banned');user=f;saveUser();closeAuth();initGame();}
function doReg(){const un=document.getElementById('rU').value.trim(),em=document.getElementById('rE').value.trim(),hp=document.getElementById('rH').value,pw=document.getElementById('rP').value,pw2=document.getElementById('rP2').value,bk=document.getElementById('rB').value,rk=document.getElementById('rR').value.trim();if(!un||un.length<4||!em.includes('@')||!pw||pw.length<6||pw!==pw2||!bk||!rk)return alert('Fill all fields correctly');const users=DB.g('users',[]);if(users.find(u=>u.username.toLowerCase()===un.toLowerCase()))return alert('Username taken');const s=DB.g('settings',{freebetAmount:30000});const nu={id:Date.now(),username:un,email:em,phone:hp,password:pw,bank:bk,rekening:rk,balance:s.freebetAmount,xp:0,vip:'Bronze',role:'user',totalBet:0,totalWin:0,totalDeposit:0,totalWithdraw:0,totalGames:0,status:'active',winMode:'normal',customRtp:70,joinDate:new Date().toISOString()};users.push(nu);DB.s('users',users);addTx(nu.id,'bonus',s.freebetAmount,'Freebet');user=nu;saveUser();closeAuth();initGame();}

// â•â•â• GAME INIT â•â•â•
function initGame(){
document.getElementById('gameName').textContent=curGame.name+' â€” '+user.username;
buildReels();initGrid();updUI();updAdminInd();
}

function buildReels(){
const row=document.getElementById('reelsRow');
row.innerHTML='';
for(let c=0;c<COLS();c++){
const col=document.createElement('div');
col.className='reel-col';col.id='rc'+c;
const strip=document.createElement('div');
strip.className='reel-strip';strip.id='rs'+c;
col.appendChild(strip);
row.appendChild(col);
}}

function getTileH(){
const wrap=document.getElementById('reelGridWrap');
if(!wrap)return 70;
return(wrap.clientHeight-6)/(ROWS())-4; // subtract padding/gaps
}

function initGrid(){
grid=[];const syms=curGame.syms;
for(let r=0;r<ROWS();r++){grid[r]=[];for(let c=0;c<COLS();c++)grid[r][c]=wRand(syms);}
renderTiles(false);
}

function wRand(syms){const tw=syms.reduce((a,s)=>a+s.w,0);let r=Math.random()*tw;for(let i=0;i<syms.length;i++){r-=syms[i].w;if(r<=0)return i;}return 0;}

function renderTiles(animate=false){
const syms=curGame.syms;const h=getTileH();
for(let c=0;c<COLS();c++){
const strip=document.getElementById('rs'+c);
let html='';
for(let r=0;r<ROWS();r++){
const s=syms[grid[r][c]];
const wild=s.wild?'wild-tile':'';
const scat=s.scatter?'scatter-tile':'';
const cls=s.cls||'';
html+=`<div class="tile" style="height:${h+4}px">
<div class="tile-inner ${wild} ${scat} ${cls}" id="ti-${r}-${c}">
<div class="tile-content">${s.e}</div>
</div></div>`;
}
strip.innerHTML=html;
strip.style.transform='translateY(0px)';
if(animate){
gsap.fromTo(strip,{y:-h*ROWS()},{y:0,duration:.4+c*.1,ease:'back.out(1.2)',delay:c*.05});
}}}

function updUI(){
if(!user)return;
document.getElementById('dispBal').textContent=fmt(user.balance);
document.getElementById('dispBet').textContent=fmt(BETS[betIdx]);
document.getElementById('dispWin').textContent=fmt(totalSpinWin);
}

function updAdminInd(){
const ind=document.getElementById('adminInd');if(!ind||!user)return;
const f=DB.g('users',[]).find(u=>u.id===user.id);if(!f)return;
const m=f.winMode||'normal';
if(m==='normal'){ind.className='admin-ind';}
else if(m==='always_win'){ind.className='admin-ind show ai-win';ind.textContent='ğŸŸ¢ WIN MODE';}
else if(m==='always_lose'){ind.className='admin-ind show ai-lose';ind.textContent='ğŸ”´ LOSE MODE';}
else if(m==='custom_rtp'){ind.className='admin-ind show ai-custom';ind.textContent=`ğŸŸ£ RTP ${f.customRtp}%`;}
}

function updMultiBar(level){
const steps=MULTI_STEPS;
document.querySelectorAll('.multi-step').forEach((el,i)=>{
el.classList.remove('active','gold');
if(i<level)el.classList.add('gold');
else if(i===level)el.classList.add('active');
});
}

// â•â•â• CLUSTER DETECTION â•â•â•
function findClusters(){
const syms=curGame.syms;const vis=Array.from({length:ROWS()},()=>Array(COLS()).fill(false));const clusters=[];
for(let r=0;r<ROWS();r++){for(let c=0;c<COLS();c++){
if(vis[r][c])continue;const idx=grid[r][c];const sym=syms[idx];if(sym.scatter)continue;
const cl=[];const q=[[r,c]];vis[r][c]=true;
while(q.length){const[cr,cc]=q.shift();cl.push([cr,cc]);
[[cr-1,cc],[cr+1,cc],[cr,cc-1],[cr,cc+1]].forEach(([nr,nc])=>{
if(nr>=0&&nr<ROWS()&&nc>=0&&nc<COLS()&&!vis[nr][nc]){
const ni=grid[nr][nc];const ns=syms[ni];
if(ni===idx||sym.wild||ns.wild){vis[nr][nc]=true;q.push([nr,nc]);}}});}
if(cl.length>=MIN_CL())clusters.push({idx,cells:cl,sym});
}}return clusters;}

function countScatters(){const syms=curGame.syms;let n=0;for(let r=0;r<ROWS();r++)for(let c=0;c<COLS();c++){if(syms[grid[r][c]]?.scatter)n++;}return n;}

// â•â•â• BET & CONTROLS â•â•â•
function chgBet(d){if(spinning)return;betIdx=Math.max(0,Math.min(BETS.length-1,betIdx+d));document.getElementById('dispBet').textContent=fmt(BETS[betIdx]);}
function toggleTurbo(){turbo=!turbo;document.getElementById('btnTurbo').classList.toggle('active',turbo);}
function toggleAuto(){autoMode=!autoMode;document.getElementById('btnAuto').classList.toggle('active',autoMode);if(autoMode&&!spinning)doSpin();}
function sleep(ms){return turbo?new Promise(r=>setTimeout(r,Math.max(ms*.3,50))):new Promise(r=>setTimeout(r,ms));}

// â•â•â• SPIN â•â•â•
async function doSpin(){
if(spinning)return;if(!user)return showAuth();
const bet=BETS[betIdx],isFree=freeSpins>0;
if(!isFree&&user.balance<bet)return alert('Balance too low!');

spinning=true;totalSpinWin=0;
const btn=document.getElementById('spinBtn');btn.disabled=true;btn.classList.add('spinning');
document.getElementById('resultText').className='result-text';document.getElementById('resultText').textContent='';
document.getElementById('casLog').innerHTML='';
document.getElementById('winBanner').style.transform='translate(-50%,-50%) scale(0)';

if(!isFree){user.balance-=bet;user.totalBet+=bet;user.totalGames++;saveUser();updUI();}
else{freeSpins--;document.getElementById('fsCtrText').textContent=`FREE: ${freeSpins}`;if(freeSpins<=0){document.getElementById('fsCtr').classList.remove('show');document.getElementById('fsOverlay').classList.remove('active');}}

// Read admin mode
const fresh=DB.g('users',[]).find(u=>u.id===user.id);
const wm=fresh?.winMode||'normal';
const cRtp=fresh?.customRtp||70;
const gRtp=DB.g('settings',{globalRtp:70}).globalRtp||70;
let shouldWin=wm==='always_win'?true:wm==='always_lose'?false:wm==='custom_rtp'?Math.random()*100<cRtp:Math.random()*100<gRtp;

const syms=curGame.syms;const normSyms=syms.filter(s=>!s.wild&&!s.scatter);

// Generate grid
if(shouldWin){
for(let r=0;r<ROWS();r++)for(let c=0;c<COLS();c++)grid[r][c]=wRand(syms);
const pick=Math.floor(Math.random()*normSyms.length);
const rIdx=syms.indexOf(normSyms[pick]);
const sr=Math.floor(Math.random()*(ROWS()-1)),sc=Math.floor(Math.random()*(COLS()-1));
const size=MIN_CL()+Math.floor(Math.random()*3);
const placed=[[sr,sc]];grid[sr][sc]=rIdx;let tries=0;
while(placed.length<size&&tries<40){const[pr,pc]=placed[Math.floor(Math.random()*placed.length)];const dirs=[[pr-1,pc],[pr+1,pc],[pr,pc-1],[pr,pc+1]].filter(([r,c])=>r>=0&&r<ROWS()&&c>=0&&c<COLS()&&!placed.some(([a,b])=>a===r&&b===c));if(dirs.length){const[nr,nc]=dirs[Math.floor(Math.random()*dirs.length)];grid[nr][nc]=rIdx;placed.push([nr,nc]);}tries++;}
if(Math.random()<.12){const si=syms.findIndex(s=>s.scatter);if(si>=0)for(let i=0;i<3;i++)grid[Math.floor(Math.random()*ROWS())][Math.floor(Math.random()*COLS())]=si;}
if(Math.random()<.18){const wi=syms.findIndex(s=>s.wild);if(wi>=0)grid[Math.floor(Math.random()*ROWS())][Math.floor(Math.random()*COLS())]=wi;}
}else{
for(let r=0;r<ROWS();r++)for(let c=0;c<COLS();c++)grid[r][c]=syms.indexOf(normSyms[(r*COLS()+c+Math.floor(Math.random()*3))%normSyms.length]);
for(let i=0;i<5;i++)grid[Math.floor(Math.random()*ROWS())][Math.floor(Math.random()*COLS())]=wRand(syms);
}

// â•â•â• GSAP REEL SPIN â•â•â•
const h=getTileH()+4;const spinCount=turbo?10:18;
await new Promise(resolve=>{let done=0;
for(let c=0;c<COLS();c++){
const strip=document.getElementById('rs'+c);
const total=spinCount+c*(turbo?2:3);
let html='';
// Current tiles
for(let r=0;r<ROWS();r++){const s=syms[grid[r][c]];html+=makeTileHTML(s,h);}
// Spinning tiles
for(let j=0;j<total;j++){const s=syms[Math.floor(Math.random()*syms.length)];html+=makeTileHTML(s,h);}
// Final tiles
for(let r=0;r<ROWS();r++){const s=syms[grid[r][c]];html+=makeTileHTML(s,h,true);}

strip.innerHTML=html;strip.style.transform='translateY(0px)';
const moveY=-(total+ROWS())*h;
const dur=turbo?.4+c*.1:.7+c*.2;

gsap.to(strip,{y:moveY,duration:dur,ease:'power2.in',
onComplete:()=>{
strip.innerHTML='';
for(let r=0;r<ROWS();r++){const s=syms[grid[r][c]];strip.innerHTML+=makeTileHTML(s,h,true);}
gsap.fromTo(strip,{y:-10},{y:0,duration:turbo?.15:.25,ease:'elastic.out(1.2,.5)'});
done++;if(done===COLS())resolve();
}});}});

// â•â•â• CASCADE LOOP â•â•â•
if(!isFree)cascadeLevel=0;
let cascadeNum=0,cascading=true;

while(cascading){
const clusters=findClusters();
if(!clusters.length){cascading=false;break;}
cascadeNum++;cascadeLevel=Math.min(cascadeLevel+1,MULTI_STEPS.length);
const multi=MULTI_STEPS[Math.min(cascadeLevel-1,MULTI_STEPS.length-1)];
updMultiBar(cascadeLevel-1);

const winCells=new Set();
clusters.forEach(cl=>cl.cells.forEach(([r,c])=>winCells.add(`${r}-${c}`)));

// Highlight
const winEls=[];
winCells.forEach(key=>{const el=document.getElementById('ti-'+key);if(el){el.classList.add('win-glow');winEls.push(el);}});
gsap.to(winEls,{scale:1.15,duration:.15,yoyo:true,repeat:1,ease:'power2.inOut'});

// Calculate win
let cWin=0;
clusters.forEach(cl=>{const s=cl.sym;cWin+=(s.wild?5:s.p)*cl.cells.length*BETS[betIdx]/5;});
cWin=Math.floor(cWin*multi);totalSpinWin+=cWin;

// Log
document.getElementById('casLog').innerHTML+=`<div class="cas-item"><span>Cascade #${cascadeNum} Ã—${multi}</span><span class="cas-win">+${fmt(cWin)}</span></div>`;
document.getElementById('dispWin').textContent=fmt(totalSpinWin);

await sleep(400);

// Explode
gsap.to(winEls,{scale:0,opacity:0,rotation:10,duration:.3,ease:'back.in(2)',stagger:.02});
await sleep(350);

// Cascade
for(let c=0;c<COLS();c++){const col=[];for(let r=ROWS()-1;r>=0;r--){if(!winCells.has(`${r}-${c}`))col.push(grid[r][c]);}while(col.length<ROWS())col.push(wRand(syms));for(let r=ROWS()-1;r>=0;r--)grid[r][c]=col[ROWS()-1-r];}
renderTiles(true);
await sleep(turbo?200:400);

// Check scatter
const sn=countScatters();
if(sn>=3){const nf=sn>=4?12:8;freeSpins+=nf;
document.getElementById('fsBannerText').textContent=`ğŸŒŸ FREE SPINS Ã—${nf}! ğŸŒŸ`;
gsap.fromTo('#fsBanner',{scale:0},{scale:1,duration:.5,ease:'elastic.out(1,.5)'});
document.getElementById('fsOverlay').classList.add('active');
document.getElementById('fsCtr').classList.add('show');
document.getElementById('fsCtrText').textContent=`FREE: ${freeSpins}`;
await sleep(1500);
gsap.to('#fsBanner',{scale:0,duration:.3});
}}

// Final scatter check
const sn2=countScatters();
if(sn2>=3&&cascadeNum===0){const nf=sn2>=4?12:8;freeSpins+=nf;
document.getElementById('fsBannerText').textContent=`ğŸŒŸ FREE SPINS Ã—${nf}! ğŸŒŸ`;
gsap.fromTo('#fsBanner',{scale:0},{scale:1,duration:.5,ease:'elastic.out(1,.5)'});
document.getElementById('fsOverlay').classList.add('active');
document.getElementById('fsCtr').classList.add('show');
document.getElementById('fsCtrText').textContent=`FREE: ${freeSpins}`;
await sleep(1500);
gsap.to('#fsBanner',{scale:0,duration:.3});
}

// Result
const rt=document.getElementById('resultText');
if(totalSpinWin>0){
user.balance+=totalSpinWin;user.totalWin+=totalSpinWin;sessionWin+=totalSpinWin;saveUser();
addTx(user.id,'bet',totalSpinWin,`Win ${curGame.name}`);

if(totalSpinWin>=BETS[betIdx]*20){
// MEGA WIN
rt.className='result-text r-mega';rt.textContent=`ğŸ‰ MEGA WIN ${fmt(totalSpinWin)}`;
gsap.fromTo(rt,{scale:.5,opacity:0},{scale:1,opacity:1,duration:.4,ease:'elastic.out(1,.5)'});
showWinBanner(totalSpinWin,'MEGA WIN!');
confetti({particleCount:200,spread:130,origin:{y:.5},colors:['#ffd700','#ff8c00','#9b6dff','#ff6eb4']});
}else if(totalSpinWin>=BETS[betIdx]*5){
rt.className='result-text r-big';rt.textContent=`ğŸ”¥ BIG WIN ${fmt(totalSpinWin)}`;
gsap.fromTo(rt,{scale:.7,opacity:0},{scale:1,opacity:1,duration:.3,ease:'back.out(2)'});
showWinBanner(totalSpinWin,'BIG WIN!');
confetti({particleCount:80,spread:90,origin:{y:.5}});
}else{
rt.className='result-text r-win';rt.textContent=`+${fmt(totalSpinWin)}`;
gsap.fromTo(rt,{y:6,opacity:0},{y:0,opacity:1,duration:.25});
}
}else{
if(!isFree)addTx(user.id,'bet',-BETS[betIdx],`Spin ${curGame.name}`);
rt.className='result-text r-lose';rt.textContent='No win';
}

updUI();
if(!isFree){cascadeLevel=0;updMultiBar(-1);}

spinning=false;btn.disabled=false;btn.classList.remove('spinning');

// Continue
if(freeSpins>0){setTimeout(doSpin,turbo?300:600);}
else if(autoMode&&user.balance>=BETS[betIdx]){setTimeout(doSpin,turbo?300:500);}
}

function makeTileHTML(s,h,isFinal=false){
const wild=s.wild?'wild-tile':'';
const scat=s.scatter?'scatter-tile':'';
const cls=s.cls||'';
return`<div class="tile" style="height:${h}px"><div class="tile-inner ${wild} ${scat} ${cls}"><div class="tile-content">${s.e}</div></div></div>`;
}

function showWinBanner(amount,label){
document.getElementById('winBannerText').textContent=fmt(amount);
document.getElementById('winBannerSub').textContent=label;
gsap.fromTo('#winBanner',
{scale:0,css:{transform:'translate(-50%,-50%) scale(0)'}},
{duration:.5,css:{transform:'translate(-50%,-50%) scale(1)'},ease:'elastic.out(1,.5)'}
);
setTimeout(()=>{
gsap.to('#winBanner',{duration:.3,css:{transform:'translate(-50%,-50%) scale(0)'}});
},2000);
}
</script>
</body>
</html>